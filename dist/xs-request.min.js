(function(){var m={};m.config={networkTimeout:6e4};var w=function(e){var r=[];for(var o in e){if(e.hasOwnProperty(o)){r.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]))}}return r.join("&")};m.request=function(e){var r=e.url||"";var o=e.data||"";var t=e.header||{};var n=e.method||"GET";var f=e.dataType||"json";var a=e.responseType||"text";var i=e.success||null;var s=e.fail||null;var p=e.complete||null;var u={};var c=new XMLHttpRequest;c.onerror=function(){u.errMsg="request:fail";if(typeof s==="function"){s(u)}if(typeof p==="function"){p(u)}};c.onreadystatechange=function(){if(c.readyState===4){u.errMsg="request:ok";u.statusCode=c.status;if(f.toLowerCase()==="json"){try{u.data=JSON.parse(c.response)}catch(e){u.data=c.response}}else{u.data=c.response}if(typeof i==="function"){s(u)}if(typeof p==="function"){p(u)}}};c.ontimeout=function(){u.errMsg="request:fail timeout";if(typeof s==="function"){s(u)}if(typeof p==="function"){p(u)}};if(r&&typeof r==="string"){if(n.toUpperCase()==="GET"){if(o&&typeof o==="object"){c.open(n,r+"?"+w(o))}else{c.open(n,r)}for(var y in t){if(t.hasOwnProperty(y)){c.setRequestHeader(y,t[y])}}if(a.toLowerCase()==="arraybuffer"){c.responseType="arraybuffer"}c.timeout=m.config.networkTimeout;c.send()}else if(n.toUpperCase()==="HEAD"||n.toUpperCase()==="CONNECT"||n.toUpperCase()==="OPTIONS"||n.toUpperCase()==="TRACE"){c.open(n,r);c.timeout=m.config.networkTimeout;c.send()}else if(n.toUpperCase()==="POST"||n.toUpperCase()==="PUT"||n.toUpperCase()==="PUT"){c.open(n,r);var d="";for(var y in t){if(t.hasOwnProperty(y)){c.setRequestHeader(y,t[y]);if(y.toLowerCase()==="content-type"){if(t[y].toLowerCase().indexOf("application/x-www-form-urlencoded")>-1){d="application/x-www-form-urlencoded"}else if(t[y].toLowerCase().indexOf("multipart/form-data")>-1){d="multipart/form-data"}}}}if(o&&typeof o==="string"){if(a.toLowerCase()==="arraybuffer"){c.responseType="arraybuffer"}c.timeout=m.config.networkTimeout;c.send(o)}else if(o&&o instanceof"ArrayBuffer"){if(a.toLowerCase()==="arraybuffer"){c.responseType="arraybuffer"}c.timeout=m.config.networkTimeout;c.send(o)}else if(o&&typeof o==="object"){if(d==="application/x-www-form-urlencoded"){c.send(w(o))}else if(d==="multipart/form-data"){var l=new FormData;for(var y in o){if(o.hasOwnProperty(y)){l.append(encodeURIComponent(y),encodeURIComponent(o[y]))}}if(a.toLowerCase()==="arraybuffer"){c.responseType="arraybuffer"}c.timeout=m.config.networkTimeout;c.send(l)}else{if(a.toLowerCase()==="arraybuffer"){c.responseType="arraybuffer"}c.timeout=m.config.networkTimeout;c.send(JSON.stringify(o))}}else{if(a.toLowerCase()==="arraybuffer"){c.responseType="arraybuffer"}c.timeout=m.config.networkTimeout;c.send()}}else{if(typeof s==="function"){u.errMsg="request:fail invalid method";s(u)}if(typeof p==="function"){u.errMsg="request:fail invalid method";p(u)}}}else{if(typeof s==="function"){u.errMsg="request:fail invalid url";s(u)}if(typeof p==="function"){u.errMsg="request:fail invalid url";p(u)}}return c};window.xs=m})();